(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{884:function(n,t,e){"use strict";e.d(t,{Z:function(){return m}});var r=e(7294),a=e(273),c=e.n(a),s=e(9558),o=e(29),u=e(7794),i=e.n(u),l=e(8776),f=e.n(l),p=e(4468),d=e(1664),h=e.n(d),x=e(1163),_=e(5893),j=function(){var n,t=(0,x.useRouter)(),e=(0,r.useState)(""),a=e[0],c=e[1],u=(0,r.useState)(!1),l=u[0],d=u[1],j=(0,r.useState)(""),m=j[0],b=j[1],v=(0,r.useState)({}),g=v[0],k=v[1],y=(0,r.useCallback)((n=(0,o.Z)(i().mark(function n(t){var e;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(e=t.target.files)&&void 0!==e&&e.length){n.next=2;break}return n.abrupt("return");case 2:return n.t0=k,n.next=5,p.x.user.$post({headers:{authorization:m},body:{icon:t.target.files[0]}});case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:case"end":return n.stop()}},n)})),function(t){return n.apply(this,arguments)}),[m]),E=(0,r.useCallback)((0,o.Z)(i().mark(function n(){var t,e,r;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=prompt("Enter the user id (See server/.env)"),e=prompt("Enter the user pass (See server/.env)"),!(!t||!e)){n.next=4;break}return n.abrupt("return",alert("Login failed"));case 4:return r="",n.prev=5,n.t0="Bearer ",n.next=9,p.x.token.$post({body:{id:t,pass:e}});case 9:n.t1=n.sent.token,b(r=n.t0.concat.call(n.t0,n.t1)),n.next=17;break;case 14:return n.prev=14,n.t2=n.catch(5),n.abrupt("return",alert("Login failed"));case 17:return n.t3=k,n.next=20,p.x.user.$get({headers:{authorization:r}});case 20:n.t4=n.sent,(0,n.t3)(n.t4),d(!0);case 23:case"end":return n.stop()}},n,null,[[5,14]])})),[]),$=(0,r.useCallback)(function(){b(""),d(!1)},[]);return(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:f().userBanner,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(h(),{href:s.V.$url(),className:f().nav,children:"Home"}),(0,_.jsx)(h(),{href:s.V.article.$url(),className:f().nav,children:"Article"})]}),(0,_.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t.push(s.V.article.$url({query:{search:a}}))},children:[(0,_.jsx)("input",{type:"text",name:"query",onInput:function(n){return n.target instanceof HTMLInputElement&&c(n.target.value)}}),(0,_.jsx)("button",{type:"submit",children:"search"})]}),(0,_.jsx)("div",{className:f().spacing}),(0,_.jsx)("div",{children:l?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("img",{src:g.icon,className:f().userIcon}),(0,_.jsx)("span",{children:g.name}),(0,_.jsx)("input",{type:"file",accept:"image/*",onChange:y}),(0,_.jsx)("button",{onClick:$,children:"LOGOUT"})]}):(0,_.jsx)("button",{onClick:E,children:"LOGIN"})})]}),(0,_.jsx)("div",{className:f().padding})]})},m=function(n){var t=n.children;return(0,_.jsxs)("div",{className:c().container,children:[(0,_.jsx)(j,{}),(0,_.jsx)("main",{className:c().main,children:t}),(0,_.jsx)("footer",{className:c().footer,children:(0,_.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["Powered by"," ",(0,_.jsx)("img",{src:s.D.vercel_svg,alt:"Vercel Logo",className:c().logo})]})})]})}},2779:function(n,t,e){"use strict";e.r(t);var r=e(29),a=e(7794),c=e.n(a),s=e(9008),o=e.n(s),u=e(7294),i=e(3301),l=e.n(i),f=e(4456),p=e.n(f),d=e(4468),h=e(884),x=e(5893);t.default=function(){var n,t,e,a=l()(d.x.tasks),s=a.data,i=a.error,f=a.mutate,_=(0,u.useState)(""),j=_[0],m=_[1],b=(0,u.useCallback)(function(n){return m(n.target.value)},[]),v=(0,u.useCallback)((n=(0,r.Z)(c().mark(function n(t){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),j){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,d.x.tasks.post({body:{label:j}});case 5:m(""),f();case 7:case"end":return n.stop()}},n)})),function(t){return n.apply(this,arguments)}),[j]),g=(0,u.useCallback)((t=(0,r.Z)(c().mark(function n(t){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.x.tasks._taskId(t.id).patch({body:{done:!t.done}});case 2:f();case 3:case"end":return n.stop()}},n)})),function(n){return t.apply(this,arguments)}),[]),k=(0,u.useCallback)((e=(0,r.Z)(c().mark(function n(t){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.x.tasks._taskId(t.id).delete();case 2:f();case 3:case"end":return n.stop()}},n)})),function(n){return e.apply(this,arguments)}),[]);return i?(0,x.jsx)("div",{children:"failed to load"}):(0,x.jsxs)(h.Z,{children:[(0,x.jsx)(o(),{children:(0,x.jsx)("title",{children:"frourio-todo-app"})}),(0,x.jsxs)("h1",{className:p().title,children:["Welcome to ",(0,x.jsx)("a",{href:"https://nextjs.org",children:"Next.js!"})]}),(0,x.jsx)("p",{className:p().description,children:"frourio-todo-app"}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("form",{style:{textAlign:"center"},onSubmit:v,children:[(0,x.jsx)("input",{value:j,type:"text",onChange:b}),(0,x.jsx)("input",{type:"submit",value:"ADD"})]}),s&&(0,x.jsx)("ul",{className:p().tasks,children:s.map(function(n){return(0,x.jsxs)("li",{children:[(0,x.jsxs)("label",{children:[(0,x.jsx)("input",{type:"checkbox",checked:n.done,onChange:function(){return g(n)}}),(0,x.jsx)("span",{children:n.label})]}),(0,x.jsx)("input",{type:"button",value:"DELETE",style:{float:"right"},onClick:function(){return k(n)}})]},n.id)})})]})]})}},4468:function(n,t,e){"use strict";e.d(t,{x:function(){return j}});var r,a,c,s,o,u,i,l,f,p,d,h=e(8416),x=e.n(h),_=e(7116),j=(a=(r=x()()).baseURL,c=r.fetch,s=(void 0===a?"https://api-frourio-example.interface-x.org/api":a).replace(/\/$/,""),o="/article",u="/tasks",i="/token",l="/user",f="POST",p="DELETE",d="PATCH",{article:{_articleId:function(n){var t="".concat(o,"/").concat(n);return{get:function(n){return c(s,t,"GET",n).json()},$get:function(n){return c(s,t,"GET",n).json().then(function(n){return n.body})},$path:function(){return"".concat(s).concat(t)}}},get:function(n){return c(s,o,"GET",n).json()},$get:function(n){return c(s,o,"GET",n).json().then(function(n){return n.body})},$path:function(n){return"".concat(s).concat(o).concat(n&&n.query?"?".concat((0,_.dataToURLString)(n.query)):"")}},tasks:{_taskId:function(n){var t="".concat(u,"/").concat(n);return{patch:function(n){return c(s,t,d,n).send()},$patch:function(n){return c(s,t,d,n).send().then(function(n){return n.body})},delete:function(n){return c(s,t,p,n).send()},$delete:function(n){return c(s,t,p,n).send().then(function(n){return n.body})},$path:function(){return"".concat(s).concat(t)}}},get:function(n){return c(s,u,"GET",n).json()},$get:function(n){return c(s,u,"GET",n).json().then(function(n){return n.body})},post:function(n){return c(s,u,f,n).json()},$post:function(n){return c(s,u,f,n).json().then(function(n){return n.body})},$path:function(n){return"".concat(s).concat(u).concat(n&&n.query?"?".concat((0,_.dataToURLString)(n.query)):"")}},token:{post:function(n){return c(s,i,f,n).json()},$post:function(n){return c(s,i,f,n).json().then(function(n){return n.body})},$path:function(){return"".concat(s).concat(i)}},user:{get:function(n){return c(s,l,"GET",n).json()},$get:function(n){return c(s,l,"GET",n).json().then(function(n){return n.body})},post:function(n){return c(s,l,f,n,"FormData").json()},$post:function(n){return c(s,l,f,n,"FormData").json().then(function(n){return n.body})},$path:function(){return"".concat(s).concat(l)}},get:function(n){return c(s,"","GET",n).text()},$get:function(n){return c(s,"","GET",n).text().then(function(n){return n.body})},$path:function(){return"".concat(s)}})},8312:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(2779)}])},4456:function(n){n.exports={title:"Home_title__FX7xZ",description:"Home_description__Qwq1f",tasks:"Home_tasks__nppVS"}},273:function(n){n.exports={container:"Layout_container__nRe7b",main:"Layout_main__T_Jjv",footer:"Layout_footer__DSG5r",logo:"Layout_logo__Ufs6S"}},8776:function(n){n.exports={userBanner:"UserBanner_userBanner__YyrEf",userIcon:"UserBanner_userIcon__MfoIQ",spacing:"UserBanner_spacing__Kg_5Q",nav:"UserBanner_nav__c12iP",padding:"UserBanner_padding__jJ_oH"}}},function(n){n.O(0,[537,774,888,179],function(){return n(n.s=8312)}),_N_E=n.O()}]);