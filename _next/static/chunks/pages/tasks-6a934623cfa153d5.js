(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{63615:function(e,t,r){"use strict";r.r(t);var n=r(59499),s=r(50029),a=r(87794),i=r.n(a),c=r(67294),o=r(57350),l=r(14418),u=r(23100),d=r(38267),p=r(43655),f=r(8399),b=r(29222),h=r(93301),x=r.n(h),j=r(96011),k=r.n(j),m=r(14468),y=r(66307),O=r(82580),_=r(1604),w=r(27420),v=r(85893);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var E=_.z.object({label:_.z.string().max(191)});t.default=function(){(0,y.A)("タスク");var e,t,r,n,a=(0,o.p)(),h=x()(m.x.tasks),j=h.data,_=h.error,g=h.mutate,P=(0,c.useState)(!1),C=P[0],N=P[1],S=(e=(0,s.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,m.x.tasks.post({body:{label:t.label}});case 3:return e.next=5,g();case 5:N(!1),a({title:"Added new task ✅",status:"success",duration:4e3,isClosable:!0});case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),T=(0,c.useCallback)((t=(0,s.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.x.tasks._taskId(t.id).patch({body:{done:!t.done}});case 2:g();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[]),I=(0,c.useCallback)((r=(0,s.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.x.tasks._taskId(t.id).delete();case 2:return e.next=4,g();case 4:a({title:"Deleted the task \uD83D\uDDD1",status:"error",duration:2e3,isClosable:!0});case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[]);return _?(0,v.jsx)("div",{children:"failed to load"}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.X,{children:"Todos"}),(0,v.jsxs)(u.xu,{children:[(0,v.jsx)(O.J9,{initialValues:{label:""},onSubmit:(n=(0,s.Z)(i().mark(function e(t,r){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,e.next=3,S(t);case 3:n();case 4:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),validationSchema:(0,w.toFormikValidationSchema)(E),children:function(e){var t=e.values,r=e.errors;return(0,v.jsxs)(O.l0,{children:[(0,v.jsx)(O.gN,{name:"label",children:function(e){var r=e.field,n=e.form;return(0,v.jsxs)(d.NI,{as:"fieldset",isInvalid:!!n.errors.label,children:[(0,v.jsx)(p.I,D(D({},r),{},{type:"text",placeholder:"TODO...",value:t.label,name:"label",required:!0})),(0,v.jsx)(f.J1,{children:n.errors.label})]})}}),(0,v.jsx)(b.z,{mt:4,colorScheme:"teal",type:"submit",isLoading:C,isDisabled:!!r.label,children:"Add"})]})}}),j&&(0,v.jsx)("ul",{className:k().tasks,children:j.map(function(e){return(0,v.jsxs)("li",{children:[(0,v.jsxs)("label",{children:[(0,v.jsx)("input",{type:"checkbox",checked:e.done,onChange:function(){return T(e)}}),(0,v.jsx)("span",{children:e.label})]}),(0,v.jsx)("input",{type:"button",value:"DELETE",style:{float:"right"},onClick:function(){return I(e)}})]},e.id)})})]})]})}},89032:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return r(63615)}])},96011:function(e){e.exports={title:"Home_title__y5DJb",description:"Home_description__TOUL9",tasks:"Home_tasks__DOMwu"}}},function(e){e.O(0,[745,343,774,888,179],function(){return e(e.s=89032)}),_N_E=e.O()}]);