(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5144:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var r=t(7294),s=t(273),a=t.n(s),c=t(9558),i=t(29),u=t(7794),o=t.n(u),l=t(3571),p=t.n(l),d=t(1664),f=t.n(d),x=t(1163),h=t(2438),m=t(8291),_=t(4468),j=t(5893),v=function(){var e,n,t=(0,x.useRouter)(),s=(0,r.useState)(""),a=s[0],u=s[1],l=(0,r.useContext)(m.V),d=l.user,v=l.cognitoUser,g=l.mutate,k=(e=(0,i.Z)(o().mark(function e(n){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.files){e.next=4;break}return e.next=3,_.x.users.post({body:{file:n.target.files[0]}});case 3:g();case 4:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)}),b=(n=(0,i.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.k.signOut();case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),y=(0,r.useMemo)(function(){return null!=d&&d.icon_path?"".concat("https://fullstack-ts-example-app-prd.s3.ap-northeast-1.amazonaws.com","/").concat(d.icon_path):"https://icon-library.com/images/anonymous-user-icon/anonymous-user-icon-16.jpg"},[d]);return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:p().userBanner,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(f(),{href:c.V.$url(),className:p().nav,children:"Home"}),(0,j.jsx)(f(),{href:c.V.article.$url(),className:p().nav,children:"Article"})]}),(0,j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.push(c.V.article.$url({query:{search:a}}))},children:[(0,j.jsx)("input",{type:"text",name:"query",onInput:function(e){return e.target instanceof HTMLInputElement&&u(e.target.value)}}),(0,j.jsx)("button",{type:"submit",children:"search"})]}),(0,j.jsx)("div",{className:p().spacing}),(0,j.jsx)("div",{children:v?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("img",{src:y,className:p().userIcon}),(0,j.jsx)("span",{children:"TODO: Add name column"}),(0,j.jsx)("input",{type:"file",accept:"image/*",onChange:k}),(0,j.jsx)("button",{onClick:b,children:"LOGOUT"})]}):null})]}),(0,j.jsx)("div",{className:p().padding})]})},g=function(e){var n=e.children;return(0,j.jsxs)("div",{className:a().container,children:[(0,j.jsx)(v,{}),(0,j.jsx)("main",{className:a().main,children:n}),(0,j.jsx)("footer",{className:a().footer,children:(0,j.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["Powered by"," ",(0,j.jsx)("img",{src:c.D.vercel_svg,alt:"Vercel Logo",className:a().logo})]})})]})}},2779:function(e,n,t){"use strict";t.r(n);var r=t(29),s=t(7794),a=t.n(s),c=t(9008),i=t.n(c),u=t(7294),o=t(3301),l=t.n(o),p=t(4456),d=t.n(p),f=t(4468),x=t(5144),h=t(5893);n.default=function(){var e,n,t,s=l()(f.x.tasks),c=s.data,o=s.error,p=s.mutate,m=(0,u.useState)(""),_=m[0],j=m[1],v=(0,u.useCallback)(function(e){return j(e.target.value)},[]),g=(0,u.useCallback)((e=(0,r.Z)(a().mark(function e(n){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),_){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.x.tasks.post({body:{label:_}});case 5:j(""),p();case 7:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)}),[_]),k=(0,u.useCallback)((n=(0,r.Z)(a().mark(function e(n){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.x.tasks._taskId(n.id).patch({body:{done:!n.done}});case 2:p();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[]),b=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(n){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.x.tasks._taskId(n.id).delete();case 2:p();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[]);return o?(0,h.jsx)("div",{children:"failed to load"}):(0,h.jsxs)(x.Z,{children:[(0,h.jsx)(i(),{children:(0,h.jsx)("title",{children:"frourio-todo-app"})}),(0,h.jsxs)("h1",{className:d().title,children:["Welcome to ",(0,h.jsx)("a",{href:"https://nextjs.org",children:"Next.js!"})]}),(0,h.jsx)("p",{className:d().description,children:"frourio-todo-app"}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("form",{style:{textAlign:"center"},onSubmit:g,children:[(0,h.jsx)("input",{value:_,type:"text",onChange:v}),(0,h.jsx)("input",{type:"submit",value:"ADD"})]}),c&&(0,h.jsx)("ul",{className:d().tasks,children:c.map(function(e){return(0,h.jsxs)("li",{children:[(0,h.jsxs)("label",{children:[(0,h.jsx)("input",{type:"checkbox",checked:e.done,onChange:function(){return k(e)}}),(0,h.jsx)("span",{children:e.label})]}),(0,h.jsx)("input",{type:"button",value:"DELETE",style:{float:"right"},onClick:function(){return b(e)}})]},e.id)})})]})]})}},8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2779)}])},3571:function(e){e.exports={userBanner:"DefaultHeader_userBanner__G79t5",userIcon:"DefaultHeader_userIcon__JkRmB",spacing:"DefaultHeader_spacing__mqHrq",nav:"DefaultHeader_nav__Xhpqc",padding:"DefaultHeader_padding__cZNt8"}},4456:function(e){e.exports={title:"Home_title__FX7xZ",description:"Home_description__Qwq1f",tasks:"Home_tasks__nppVS"}},273:function(e){e.exports={container:"Layout_container__nRe7b",main:"Layout_main__T_Jjv",footer:"Layout_footer__DSG5r",logo:"Layout_logo__Ufs6S"}}},function(e){e.O(0,[424,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);