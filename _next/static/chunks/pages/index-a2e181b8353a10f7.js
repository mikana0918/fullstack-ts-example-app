(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2438:function(t,n,e){"use strict";e.d(n,{k:function(){return p}});var r,c,u,a,o=e(29),s=e(7794),i=e.n(s),l=e(5387),p={currentAuthenticatedUser:(r=(0,o.Z)(i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.d.Auth.currentAuthenticatedUser();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(){return r.apply(this,arguments)}),getCurrentToken:(c=(0,o.Z)(i().mark(function t(){var n;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.d.Auth.currentSession();case 3:return n=t.sent.getAccessToken().getJwtToken(),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0),console.log("failed to get current auth token",t.t0);case 12:case"end":return t.stop()}},t,null,[[0,9]])})),function(){return c.apply(this,arguments)}),signIn:(u=(0,o.Z)(i().mark(function t(n){var e,r,c;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.username,r=n.password,t.prev=1,t.next=4,l.d.Auth.signIn(e,r);case 4:return c=t.sent,t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(1),console.log("error signing in",t.t0);case 11:case"end":return t.stop()}},t,null,[[1,8]])})),function(t){return u.apply(this,arguments)}),signOut:(a=(0,o.Z)(i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.d.Auth.signOut();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("error signing out: ",t.t0);case 8:case"end":return t.stop()}},t,null,[[0,5]])})),function(){return a.apply(this,arguments)})}},5144:function(t,n,e){"use strict";e.d(n,{Z:function(){return v}});var r=e(7294),c=e(273),u=e.n(c),a=e(9558),o=e(29),s=e(7794),i=e.n(s),l=e(3571),p=e.n(l),f=e(1664),d=e.n(f),h=e(1163),x=e(2438),g=e(8291),j=e(5893),m=function(){var t,n=(0,h.useRouter)(),e=(0,r.useState)(""),c=e[0],u=e[1],s=(0,r.useState)({}),l=s[0];s[1];var f=(0,r.useContext)(g.V).isAuthenticated,m=(t=(0,o.Z)(i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.k.signOut();case 2:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)});return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:p().userBanner,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(d(),{href:a.V.$url(),className:p().nav,children:"Home"}),(0,j.jsx)(d(),{href:a.V.article.$url(),className:p().nav,children:"Article"})]}),(0,j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),n.push(a.V.article.$url({query:{search:c}}))},children:[(0,j.jsx)("input",{type:"text",name:"query",onInput:function(t){return t.target instanceof HTMLInputElement&&u(t.target.value)}}),(0,j.jsx)("button",{type:"submit",children:"search"})]}),(0,j.jsx)("div",{className:p().spacing}),(0,j.jsx)("div",{children:f?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("img",{src:l.icon,className:p().userIcon}),(0,j.jsx)("span",{children:l.name}),(0,j.jsx)("input",{type:"file",accept:"image/*",onChange:function(){console.log("edit icon")}}),(0,j.jsx)("button",{onClick:m,children:"LOGOUT"})]}):null})]}),(0,j.jsx)("div",{className:p().padding})]})},v=function(t){var n=t.children;return(0,j.jsxs)("div",{className:u().container,children:[(0,j.jsx)(m,{}),(0,j.jsx)("main",{className:u().main,children:n}),(0,j.jsx)("footer",{className:u().footer,children:(0,j.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["Powered by"," ",(0,j.jsx)("img",{src:a.D.vercel_svg,alt:"Vercel Logo",className:u().logo})]})})]})}},2779:function(t,n,e){"use strict";e.r(n);var r=e(29),c=e(7794),u=e.n(c),a=e(9008),o=e.n(a),s=e(7294),i=e(3301),l=e.n(i),p=e(4456),f=e.n(p),d=e(4468),h=e(5144),x=e(5893);n.default=function(){var t,n,e,c=l()(d.x.tasks),a=c.data,i=c.error,p=c.mutate,g=(0,s.useState)(""),j=g[0],m=g[1],v=(0,s.useCallback)(function(t){return m(t.target.value)},[]),_=(0,s.useCallback)((t=(0,r.Z)(u().mark(function t(n){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("createTask"),n.preventDefault(),j){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,d.x.tasks.post({body:{label:j}});case 6:m(""),p();case 8:case"end":return t.stop()}},t)})),function(n){return t.apply(this,arguments)}),[j]),b=(0,s.useCallback)((n=(0,r.Z)(u().mark(function t(n){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.x.tasks._taskId(n.id).patch({body:{done:!n.done}});case 2:p();case 3:case"end":return t.stop()}},t)})),function(t){return n.apply(this,arguments)}),[]),y=(0,s.useCallback)((e=(0,r.Z)(u().mark(function t(n){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.x.tasks._taskId(n.id).delete();case 2:p();case 3:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}),[]);return i?(0,x.jsx)("div",{children:"failed to load"}):(0,x.jsxs)(h.Z,{children:[(0,x.jsx)(o(),{children:(0,x.jsx)("title",{children:"frourio-todo-app"})}),(0,x.jsxs)("h1",{className:f().title,children:["Welcome to ",(0,x.jsx)("a",{href:"https://nextjs.org",children:"Next.js!"})]}),(0,x.jsx)("p",{className:f().description,children:"frourio-todo-app"}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("form",{style:{textAlign:"center"},onSubmit:_,children:[(0,x.jsx)("input",{value:j,type:"text",onChange:v}),(0,x.jsx)("input",{type:"submit",value:"ADD"})]}),a&&(0,x.jsx)("ul",{className:f().tasks,children:a.map(function(t){return(0,x.jsxs)("li",{children:[(0,x.jsxs)("label",{children:[(0,x.jsx)("input",{type:"checkbox",checked:t.done,onChange:function(){return b(t)}}),(0,x.jsx)("span",{children:t.label})]}),(0,x.jsx)("input",{type:"button",value:"DELETE",style:{float:"right"},onClick:function(){return y(t)}})]},t.id)})})]})]})}},4468:function(t,n,e){"use strict";e.d(n,{x:function(){return E}});var r,c,u,a,o,s,i,l,p,f,d,h=e(9499),x=e(29),g=e(7794),j=e.n(g),m=e(9669),v=e.n(m),_=e(8416),b=e.n(_),y=e(7116),k=e(2438);function w(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function T(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?w(Object(e),!0).forEach(function(n){(0,h.Z)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):w(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var O=v().create();O.interceptors.request.use((r=(0,x.Z)(j().mark(function t(n){var e;return j().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.k.getCurrentToken();case 2:return e=t.sent,n.headers=T(T({},n.headers),{},{Authorization:"Bearer ".concat(e)}),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})),function(t){return r.apply(this,arguments)}));var E=(u=(c=b()(O)).baseURL,a=c.fetch,o=(void 0===u?"https://api-frourio-example.interface-x.org/api":u).replace(/\/$/,""),s="/article",i="/tasks",l="/users",p="POST",f="DELETE",d="PATCH",{article:{_articleId:function(t){var n="".concat(s,"/").concat(t);return{get:function(t){return a(o,n,"GET",t).json()},$get:function(t){return a(o,n,"GET",t).json().then(function(t){return t.body})},$path:function(){return"".concat(o).concat(n)}}},get:function(t){return a(o,s,"GET",t).json()},$get:function(t){return a(o,s,"GET",t).json().then(function(t){return t.body})},$path:function(t){return"".concat(o).concat(s).concat(t&&t.query?"?".concat((0,y.dataToURLString)(t.query)):"")}},tasks:{_taskId:function(t){var n="".concat(i,"/").concat(t);return{patch:function(t){return a(o,n,d,t).send()},$patch:function(t){return a(o,n,d,t).send().then(function(t){return t.body})},delete:function(t){return a(o,n,f,t).send()},$delete:function(t){return a(o,n,f,t).send().then(function(t){return t.body})},$path:function(){return"".concat(o).concat(n)}}},get:function(t){return a(o,i,"GET",t).json()},$get:function(t){return a(o,i,"GET",t).json().then(function(t){return t.body})},post:function(t){return a(o,i,p,t).json()},$post:function(t){return a(o,i,p,t).json().then(function(t){return t.body})},$path:function(t){return"".concat(o).concat(i).concat(t&&t.query?"?".concat((0,y.dataToURLString)(t.query)):"")}},users:{get:function(t){return a(o,l,"GET",t).json()},$get:function(t){return a(o,l,"GET",t).json().then(function(t){return t.body})},post:function(t){return a(o,l,p,t,"FormData").json()},$post:function(t){return a(o,l,p,t,"FormData").json().then(function(t){return t.body})},$path:function(){return"".concat(o).concat(l)}},get:function(t){return a(o,"","GET",t).text()},$get:function(t){return a(o,"","GET",t).text().then(function(t){return t.body})},$path:function(){return"".concat(o)}})},8312:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(2779)}])},3571:function(t){t.exports={userBanner:"DefaultHeader_userBanner__G79t5",userIcon:"DefaultHeader_userIcon__JkRmB",spacing:"DefaultHeader_spacing__mqHrq",nav:"DefaultHeader_nav__Xhpqc",padding:"DefaultHeader_padding__cZNt8"}},4456:function(t){t.exports={title:"Home_title__FX7xZ",description:"Home_description__Qwq1f",tasks:"Home_tasks__nppVS"}},273:function(t){t.exports={container:"Layout_container__nRe7b",main:"Layout_main__T_Jjv",footer:"Layout_footer__DSG5r",logo:"Layout_logo__Ufs6S"}}},function(t){t.O(0,[537,774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);